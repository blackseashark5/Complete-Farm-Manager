<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Available Labor Dashboard</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Arial', sans-serif;
        }
        h1 {
            color: #333;
        }
        .container {
            margin-top: 50px;
        }
        .card {
            margin: 15px;
            background-color: #ffffff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .card-header {
            background-color: #007bff;
            color: #ffffff;
            text-align: center;
        }
        .metric {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
        }
        .metric-title {
            font-size: 14px;
            text-align: center;
            color: #888;
        }
        .icon {
            font-size: 36px;
            text-align: center;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .export-btn {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center my-4">Available Labor Dashboard</h1>

        <!-- Form to dynamically add labor entries -->
        <form id="laborForm">
            <div class="form-group">
                <label for="laborName">Labor Name:</label>
                <input type="text" class="form-control" id="laborName" placeholder="Enter labor name" required>
            </div>
            <div class="form-group">
                <label for="laborSkill">Skill:</label>
                <input type="text" class="form-control" id="laborSkill" placeholder="Enter labor skill" required>
            </div>
            <div class="form-group">
                <label for="hoursWorked">Hours Worked:</label>
                <input type="number" class="form-control" id="hoursWorked" placeholder="Enter hours worked" required>
            </div>
            <div class="form-group">
                <label for="laborPerformance">Performance Rating:</label>
                <input type="number" class="form-control" id="laborPerformance" placeholder="Enter performance rating (1-10)" required>
            </div>
            <button type="submit" class="btn btn-primary">Add Labor Entry</button>
        </form>

        <!-- Display the dynamically added entries in a card layout -->
        <div class="row text-center mt-4" id="laborEntries"></div>

        <!-- Export to CSV Button -->
        <button class="btn btn-success export-btn" id="exportCsv">Export to CSV</button>
    </div>

    <script>
        const laborData = [];

        document.getElementById('laborForm').addEventListener('submit', function(event) {
            event.preventDefault();

            // Get form values
            var laborName = document.getElementById('laborName').value;
            var laborSkill = document.getElementById('laborSkill').value;
            var hoursWorked = document.getElementById('hoursWorked').value;
            var laborPerformance = document.getElementById('laborPerformance').value;

            // Store the form data in the laborData array
            laborData.push({
                name: laborName,
                skill: laborSkill,
                hours: hoursWorked,
                performance: laborPerformance
            });

            // Create a new card for the labor entry
            var laborCard = `
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <div class="icon">üë∑‚Äç‚ôÇÔ∏è</div>
                            <div class="metric">${laborName}</div>
                            <div class="metric-title">Skill: ${laborSkill}</div>
                            <div class="metric-title">Hours Worked: ${hoursWorked}</div>
                            <div class="metric-title">Performance: ${laborPerformance}/10</div>
                        </div>
                    </div>
                </div>
            `;

            // Append the new card to the labor entries container
            document.getElementById('laborEntries').innerHTML += laborCard;

            // Clear the form fields
            document.getElementById('laborForm').reset();
        });

        document.getElementById('exportCsv').addEventListener('click', function() {
            if (laborData.length === 0) {
                alert("No data to export!");
                return;
            }
            
            // Create CSV content
            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "Labor Name,Skill,Hours Worked,Performance Rating\n";
            
            laborData.forEach(function(row) {
                let rowData = `${row.name},${row.skill},${row.hours},${row.performance}`;
                csvContent += rowData + "\n";
            });

            // Create a download link for the CSV file
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "labor_data.csv");
            document.body.appendChild(link);

            // Trigger the download
            link.click();

            // Remove the link after downloading
            document.body.removeChild(link);
        });
    </script>
</body>
</html>
